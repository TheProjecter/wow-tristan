From: <Saved by Windows Internet Explorer 7>
Subject: Ventrilo Server Setup Information
Date: Fri, 11 Jan 2008 13:48:25 +0100
MIME-Version: 1.0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Ventrilo Server Setup Information</TITLE>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 6.00.6000.16587" name=3DGENERATOR></HEAD>
<BODY>
<DIV align=3Dcenter>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Ventrilo Server Setup=20
Information.<BR></FONT><FONT face=3D"Arial, Helvetica, =
sans-serif">Version=20
2.0.0<BR>(c)Copyright 1999-2003 Flagship Industries,=20
Inc.<BR>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D </FONT></P></DIV>
<H4><FONT face=3D"Arial, Helvetica, sans-serif">This document is divided =
into=20
different sections.</FONT></H4>
<P><FONT face=3D"Arial, Helvetica, sans-serif">1) <A=20
href=3D"http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm#1">Requiremen=
ts</A> -=20
The basic requirements and general operational information about the =
server and=20
what is expected before it can run.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">2) <A=20
href=3D"http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm#2">INI File=20
settings</A> - All of the possible options and parameters in the=20
ventrilo_srv.ini file.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">3) <A=20
href=3D"http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm#3">USR File=20
settings</A> - Format of predefined user login names and =
parameters.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">4) <A=20
href=3D"http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm#4">Server =
program</A>=20
- How its run and any special options associated with the specific =
platform=20
version of the server.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">5</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif">) <A=20
href=3D"http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm#5">NT =
Service=20
program</A> - How to configure and setup the NT Service.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">6</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif">) <A=20
href=3D"http://www.viptx.net/varc/ventrilo/ventrilo_srv.htm#6">Console/RC=
ON=20
commands</A> - Server administration commands.</FONT></P>
<HR>

<H4><FONT face=3D"Arial, Helvetica, sans-serif"><EM><A name=3D1></A>1) =
Requirements=20
</EM></FONT></H4><FONT face=3D"Arial, Helvetica, sans-serif">
<P>The Ventrilo server is designed to be scalable, in that multiple =
copies of=20
the server can be started on the same machine. Each instance of the =
Ventrilo=20
server running on the same machine must be assigned a unique TCP/IP port =
number=20
in it's corresponding INI file.</P>
<P>CPU utilization by the Ventrilo server is negligible so just about =
any low=20
end machine can be used. However, servers will require better upload and =

download bandwidth capacities due to the nature of voice communication. =
The more=20
concurrent clients connected to a server (and in the same channel) the =
greater=20
the bandwidth utilization. </P>
<P><STRONG>Note to Server Administrators:</STRONG></P>
<P>Starting with version 2.0.0 Ventrilo is no longer free. As a =
consequence of=20
this, once the server is started there is a limited time span in which a =
client=20
can request Admin rights to the server. After this time has elapsed you =
will no=20
longer be able to login as a server administrator if you have not =
purchased a=20
client side registration key. However, you can get back to an =
administratable=20
state by restarting the server, or the preferred way is to purchase a=20
registration key to make your client fully compliant and functional with =
no=20
restrictions. The grace period is several hours and should be enough =
time,=20
including restarts, for you to decide whether or not Ventrilo is worth=20
purchasing.</P>
<P>On this same subject unregistered clients will have limited =
functionality as=20
well. They should be able to use the full features of the program until =
a=20
certain elapsed time is reached at which point the client will appear to =
stop=20
working. This is intentional and not a program bug or error. In order to =
solve=20
this, and if you have decided to use Ventrilo for all future =
communications,=20
then you should encourage your users to purchase their own registration=20
keys.</P>
<P>Be advised, duplicate registration keys are not allowed, and since =
each=20
person needs to purchase their own key they should take all possible =
measures to=20
assure that the key remains private. Flagship Industries, its partners =
and=20
associates are not responsible for someone giving out their registration =
key.=20
See the Client EULA and the Server LICENSE file for complete details =
regarding=20
this and other licensing issues.</P></FONT>
<HR>

<H4><FONT face=3D"Arial, Helvetica, sans-serif"><EM><A name=3D2></A>2) =
INI File=20
settings </EM></FONT></H4><FONT face=3D"Arial, Helvetica, sans-serif">
<P>The "<FONT face=3D"Courier New, Courier, =
mono">ventrilo_srv.ini</FONT>" file=20
has two categories:</P>
<P><STRONG>Server</STRONG> - General configuration=20
info.<BR><STRONG>Intf</STRONG> =96 Accept connections only from specific =
IP=20
interfaces</P>
<P>Note: Version 1.x of the server had five categories. The Admins, =
Authenticate=20
and Channels topics have been removed as they are replaced by the =
automatically=20
generated CHN file and the admin generated USR file.</P>
<P>Each category is contained in <STRONG>[</STRONG> brackets =
<STRONG>]</STRONG>=20
and each option is entered using <STRONG>key=3Dvalue</STRONG> =
formatting. This=20
document will use the settings included in the example INI file.</P>
<P><STRONG>[Server]</STRONG></P>
<P><STRONG>Name=3DServer 1</STRONG></P>
<P>This is the name of the server that appears at the top of the active =
user=20
list when someone connects. (Required)</P>
<P><STRONG>Comment=3DWelcome</STRONG></P>
<P>The comment that appears next to the server's name in the same way =
that a=20
user can assign a comment to their login names. (Optional)</P>
<P><STRONG>Port=3D3784</STRONG></P>
<P>This is the TCP/IP port number that the server will listen on waiting =
for=20
clients to connect. If you start multiple instances of the server on the =
same=20
computer then they must have different INI files with unique TCP port =
numbers=20
assigned to them. (Required)</P>
<P><STRONG>Auth=3D0</STRONG></P>
<P>This is the authentication mode. (Required)</P>
<P>0 =3D No authentication and anyone can connect.<BR>1 =3D Global =
password=20
authentication.<BR>2 =3D Specific user/password authentication. See =
section #3 for=20
further details.</P>
<P><STRONG>Duplicates=3D1</STRONG></P>
<P>Enables or disables duplicate login names. (Required)</P>
<P>0 =3D Disables duplicates.<BR>1 =3D Allows duplicate login names.</P>
<P>If disabled and someone logs in with a user name identical to that of =
a=20
currently connected user, the server will disconnect the first user. =
This=20
setting should only be used when <STRONG>Auth=3D2</STRONG> for sanity =
reasons but=20
it can be disabled for any Auth mode. Note: When this option is set to 0 =
it=20
creates problems for clients that had auto-reconnect enabled, however, =
starting=20
with version 2.0.0 this is nolonger a problem.</P>
<P><STRONG>AdminPassword=3D</STRONG></P>
<P>This is the remote server administration password. Leaving this =
option blank=20
will disable remote admin logins. This password is used by normal login =
accounts=20
and they activate a menu option to have admin rights assigned to their =
login.=20
(Optional)</P>
<P><STRONG>Password=3D</STRONG></P>
<P>This is the global login password for when <STRONG>Auth=3D1</STRONG>. =
All users=20
connecting to this server must have this password, otherwise the server =
will=20
send back an error message saying that they could not be authenticated.=20
(Optional)</P>
<P><STRONG>MaxClients=3D32</STRONG></P>
<P>This option specifies the maximum number of clients that can be =
connected to=20
the server at the same time. The server has a hard coded maximum limit =
of 100=20
clients (as of version 1.03), however, your servers network connection =
might not=20
be able to handle a large number of simultaneous connections. =
(Required)</P>
<P><STRONG>SendBuffer=3D0</STRONG></P>
<P>Introduced with version 1.03, this option specifies the size of the =
TCP=20
outbound buffers to each client. The value is in bytes.</P>
<P>Starting with version 1.05 a value of 0 will force the program to use =
a=20
default value of 131072 bytes. If you have a smaller value then I =
recommend=20
setting it to 0 and let the program use its default.</P>
<P>In the servers log file there will be a line starting with "MSG_CONN" =
when a=20
new client connects. At the end of this line will be two pairs of =
numbers (A,B)=20
(C,D). The A number is the buffer size as defined by your platform. The =
B number=20
is the buffer size as reported by the system after the Ventrilo server =
has=20
changed it. The number could be larger or smaller depending on the =
platform.</P>
<P><STRONG>RecvBuffer=3D0</STRONG></P>
<P>Introduced with version 1.05, this option specifies the size of the =
TCP=20
inbound buffers for each client. The value is in bytes.</P>
<P>A value of 0 will force the program to use it's default settings of =
131072=20
bytes per client connection.</P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">In the servers log file =
there will=20
be a line starting with "MSG_CONN" when a new client connects. At the =
end of=20
this line will be two pairs of numbers (A,B) (C,D). The C number is the =
buffer=20
size as defined by your platform. The D number is the buffer size as =
reported by=20
the system after the Ventrilo server has changed it. The number could be =
larger=20
or smaller depending on the platform.</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif"> </FONT></P></FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif">
<P><STRONG>Diag=3D0</STRONG></P>
<P>0 =3D Diagnostics off.<BR>1 =3D Diagnostics on.</P>
<P>Introduced with version 1.03, this option turns on more diagnostic=20
information to be used when troubleshooting problems. However, its =
mostly for=20
developer use. Starting with version 2.0.0 this option has become almost =
useless=20
for ordinary users. If you turn it on don't expect much.</P>
<P><STRONG>LogonTimeout=3D5</STRONG></P>
<P>Introduced with version 1.05, this option specifies in seconds how =
long a=20
client has to logon to the server before it is automatically =
disconnected. Once=20
logged on the option has no meaning. Prior to version 1.05 the server =
used a=20
hard coded value of 3 seconds and occasionally clients would be kicked =
as soon=20
as connected due to latency in TCP setup times.</P>
<P><STRONG>CloseStd=3D1</STRONG></P>
<P>0 =3D Don't close standard input, output and error handles.<BR>1 =3D =
Close=20
standard input, output and error handles.</P>
<P>Introduced with version 1.07, this option instructs the server to =
close or=20
leave-intact the standard input, output and error file handles when =
starting in=20
daemon mode. At the time of this writing the Ventrilo server is compiled =
on=20
RedHat 7.2 systems but there seems to be an incompatibility with closing =
these=20
standard file handles on RedHat80 systems thus causing the program to =
crash.=20
Setting this option to 0 will force the program to leave the file =
handles open=20
and prevent it from crashing on RH80 systems. The only downside to this =
will be=20
if the program was started in daemon mode via an SSH terminal session. =
When you=20
"exit" the terminal session it will hang waiting for all file handles in =
spawned=20
processes to close, and you will be forced to manually kill the SSH =
terminal=20
program. This doesn't seem to happen with normal xterm, gnome-terminal =
or telnet=20
sessions. *shrug*</P>
<P>Note: Starting with version 2.0.0 this doesn't seem to be an issue =
anymore=20
due to changes made to the build process. However, the option remains =
available=20
in case it is needed in the future.</P>
<P><STRONG>FilterWave=3D0</STRONG></P></FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif">
<P>0 =3D Allow wave file binds to replicate.<BR>1 =3D Filter out =
(prevent) wave file=20
binds from replicating.</P>
<P>Introduced with version 1.07, this option enables or disables =
filtering of=20
wave file binds being replicated to other users.</P>
<P><STRONG>FilterTTS=3D0</STRONG></P>
<P>0 =3D Allow TTS binds to replicate.<BR>1 =3D Filter out (prevent) TTS =
binds from=20
replicating.</P>
<P>Introduced with version 1.07, this option enables or disables =
filtering of=20
Text-to-speech binds being replicated to other users.</P>
<P><STRONG>TimeStamp=3D0</STRONG></P>
<P>0 =3D Disable console timestamp's.<BR>1 =3D Enable console =
timestamp's.</P>
<P>Introduced with version 1.07, this option enables or disables =
timestamp's=20
being displayed in console messages. This includes remote consoles.</P>
<P><STRONG>PingRate=3D10</STRONG></P>
<P>Introduced with version 1.07, this option allows the administrator to =
change=20
the interval at which the server pings the clients. The value is =
specified in=20
seconds and defaults to 10. Setting to a lower value might be useful for =

diagnosing problem clients especially when the remote console command=20
"pingtrace" is used.</P>
<P><STRONG>ExtraBuffer=3D0</STRONG></P>
<P>Introduced with version 2.0.0, this option allows the administrator =
to give=20
each outbound client data stream additional buffer space but it's =
allocated and=20
controlled by the server instead of relying on the TCP stack =
implementation. A=20
value of 0 instructs the server to use it's default value of 128K bytes =
of extra=20
buffer space.</P>
<P><STRONG>ChanWidth=3D0</STRONG></P>
<P>Introduced with version 2.0.0, this option specifies a maximum number =
of=20
parallel sub-channels that can be created in each channel. It has no =
effect on=20
root level channels which only server admin's can create. A value of 0 =
means=20
there is no limit. </P>
<P><STRONG>ChanDepth=3D0</STRONG></P>
<P>Introduced with version 2.0.0, this option specifies the maximum =
number of=20
nested sub-channels (depth) that can be created. A value of 0 means the =
server=20
will use it's default max value of 8 nested channels.</P>
<P><STRONG>ChanClients=3D0</STRONG></P>
<P>Introduced with version 2.0.0, this option specifies the maximum =
number of=20
clients allowed in any channel. A value of 0 means there is no limit to =
the=20
number of clients per channel.</P>
<P><STRONG>DisableMaxClients=3D1</STRONG></P>
<P>0=3DAllow remote consoles to change "maxclients" =
value.<BR>1=3DDisable (prevent)=20
remote consoles from changing the "maxclients" value. </P>
<P>Introduced with version 2.0.0, this option prevents remote console =
commands=20
(those type into the chat window when logged in with server admin =
rights) from=20
dynamically changing the real "maxclients" allowed by the server. =
However, if=20
the server was started in a non-daemon mode the local console can still =
change=20
the maxclients.</P>
<P><STRONG>DisableQuit=3D1</STRONG></P>
<P>0=3DAllow remote consoles to issue the "quit" command.<BR>1=3DDisable =
(prevent)=20
remote console from issuing the "quit" command.</P>
<P>Introduced with version 2.0.0, this option prevents remote console =
commands=20
(those typed into the chat window when logged in with server admin =
rights) from=20
issuing the "quit" command which would instruct the server to exit the =
system.=20
However, if the server was started in a non-daemon mode the local =
console can=20
still issue the quit command.</P>
<P><STRONG>VoiceCodec=3D0</STRONG></P>
<P>Introduced with version 2.0.0, this option tells the server which =
codec all=20
clients must use. The value is a 0 based index into a list of possible =
codecs.=20
To see the list of currently supported codec types issue the command =
"<FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv -?</FONT>" and the =
program will=20
display a table of codecs and their associated formats.</P>
<P><STRONG>VoiceFormat=3D1</STRONG></P>
<P>Introduced with version 2.0.0, this option is the second part of =
VoiceCodec.=20
Each codec can have one or more possible formats that control the =
quality and=20
bandwidth usage of the specified codec. To see the list of currently =
supported=20
codec formats issue the command "<FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv -?</FONT>" and the =
program will=20
display a table of codecs and their associated formats.</P>
<P><STRONG>SilentLobby=3D0</STRONG></P>
<P>0 =3D Allow replication.<BR>1 =3D Suppress replication, thus making =
the lobby=20
silent.</P>
<P>Introduced with version 2.0.0, this option allows or suppresses =
replication=20
of voice, wave binds and tts binds when the client is in the main =
lobby.</P>
<P><STRONG>[Intf]</STRONG></P></FONT><FONT face=3D"Arial, Helvetica, =
sans-serif">
<P>This section allows for controlling which interfaces the server will =
accept=20
client connections from. If you do not specify anything in this section =
then the=20
server will accept client connections from all available interfaces. =
</P>
<P>Note: Starting with version 2.0.0 the "Count=3D" key is nolonger =
needed. The=20
only thing that is required is that each key must be unique but can be =
anything=20
you want them to be. The following examples use the key name "Intf" =
followed by=20
a number to make the key unique. The interfaces can now be specified as =
host=20
names or IP numbers.</P>
<P><STRONG>Intf1=3D192.168.0.31</STRONG></P>
<P><STRONG>Intf2=3Dexternal.mydomain.com</STRONG></P>
<P><STRONG>Intf3=3Dinternal.mydomain.com</STRONG></P>
<P><STRONG>Intf4=3D127.0.0.1</STRONG></P>
<P>&nbsp;</P></FONT>
<HR>

<H4><FONT face=3D"Arial, Helvetica, sans-serif"><EM><A id=3D3 =
name=3D3></A>3) USR File=20
settings </EM></FONT></H4><FONT face=3D"Arial, Helvetica, sans-serif">
<P>The "<FONT face=3D"Courier New, Courier, =
mono">ventrilo_srv.usr</FONT>" file is=20
used for specifying user login names and other associated details unique =
to each=20
definition. The users login name must be in brackets like this=20
<STRONG>[Flagship]</STRONG>. Similar to the INI file described above =
each topic=20
will have the following keys for defining details about each specific =
user.=20
Using the login names of Flagship and Defiant a USR file might look =
something=20
like the following.</P>
<P>[Flagship]<BR>UserPassword=3Dtest1<BR>ServerAdmin=3D1</P>
<P>[Defiant]<BR>UserPassword=3Dtest2<BR>ServerAdmin=3D0</P></FONT>
<TABLE width=3D"80%" align=3Dcenter border=3D1>
  <TBODY>
  <TR>
    <TD bgColor=3D#990000><FONT face=3D"Arial, Helvetica, sans-serif"=20
      color=3D#ffffff><EM><STRONG><FONT=20
      color=3D#ffff00>WARNING</FONT></STRONG></EM><FONT=20
      color=3D#ffff00><STRONG>:</STRONG></FONT><STRONG> Using this file =
can be=20
      dangerous because Login and Password information is stored in a =
clear-text=20
      format on the server. Should the computer running the ventrilo =
server be=20
      compromised you will be exposed to potential misuse of server =
admin=20
      facilities and login info. It is <EM>strongly</EM> recommended =
that=20
      Ventrilo login account names and passwords be completely different =
from=20
      other formal system accounts like system shells, unix systems or =
windows=20
      login accounts. You implement at your own risk. Then again, if =
your box is=20
      compromised you probably have much larger issues to worry=20
      about.</STRONG></FONT></TD></TR></TBODY></TABLE>
<P><FONT face=3D"Arial, Helvetica, sans-serif">By defining a specific =
user you are=20
reserving that users name as a possible login and requires that the =
client=20
provide the password that matches the "UserPassword" as shown above. =
This is the=20
case no matter which Auth mode is being used as defined in the INI=20
file.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">If =
<STRONG>Auth=3D1</STRONG> then the=20
passwords shown for each listed user take precedence over the "Password" =
defined=20
in the INI file.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">If =
<STRONG>Auth=3D2</STRONG> then=20
only users defined in this file are allowed to connect to the =
server.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">In the examples above the =
user=20
Flagship would have server admin rights automatically assigned to him as =
soon as=20
he connects to the server. Please note the warning above as this option =
can be=20
dangerous.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">At the time of this =
writing this=20
file is created and edited by hand. Future versions might have external=20
interfaces to automate the process.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Note: Starting with =
version 2.0.0=20
all passwords (server admin, global, user, channel and channel admin) =
are case=20
sensitive. Version 1.x passwords were NOT case sensitive.</FONT></P>
<P>&nbsp;</P>
<HR>

<H4><FONT face=3D"Arial, Helvetica, sans-serif"><EM><A id=3D4 =
name=3D4></A>4) Server=20
program </EM></FONT></H4><FONT face=3D"Arial, Helvetica, sans-serif">
<P>All servers, no matter which platform, are designed to be run in a =
console=20
window. However, the UNIX'ish based versions can be started in daemon =
mode and=20
the Windows NT based versions can be started via a separate Ventrilo =
Service=20
program. </P>
<P>Starting with version 1.03 there are two different ways to start a =
server.=20
The original way requires you to change the current working directory =
before=20
starting the server. A new optional mechanism uses the "<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" command line option to =
specify the=20
location of the required files without changing the working =
directory.</P>
<P><STRONG>General information about starting a server.</STRONG></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">When the program starts =
it will=20
read the contents of the INI file and validate the information for =
completeness.=20
If any of the configuration information is incorrect the server will=20
automatically terminate. If the server refuses to start after reading =
the config=20
info you can check the "<FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.log</FONT>" for=20
details.</FONT></P></FONT>
<P><FONT face=3D"Arial, Helvetica, sans-serif">After starting the server =
it will=20
record its Process ID, or PID, to a file named "<FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.pid</FONT>" in the =
current or=20
filename-prefixed directory. This is useful should you need to manually =
kill a=20
server that is misbehaving, not as if that will ever happen.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">To start a server in =
daemon mode=20
append a "<FONT face=3D"Courier New, Courier, mono">-d</FONT>" to the =
command=20
line.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">To get command line help =
and a list=20
of voice codec/format options append the "<FONT=20
face=3D"Courier New, Courier, mono">-?</FONT>" to the command=20
line.</FONT></P><FONT face=3D"Arial, Helvetica, sans-serif">
<P><STRONG>Method 1: Original and default way.</STRONG></P>
<P>To start a server you must first change your current working =
directory to=20
that of the "<FONT face=3D"Courier New, Courier, =
mono">ventrilo_srv.ini</FONT>"=20
file that you plan on using. </P>
<P>To start a standalone server, not a service or a daemon, simply =
execute the=20
appropriate server program for the given platform, assuming the working=20
directory has been set first.</P>
<P><STRONG>Method 2: Path and filename prefix.</STRONG></P>
<P>Starting with version 1.03 you can use the "<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" command line option to =
specify the=20
path and prefix name to be used for all files. This requires that all =
files use=20
a unique name for each server that is started on the same machine. When =
used in=20
this mode the server will use the path/prefix immediately following the =
"<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" parameter and tack on =
extensions=20
for each of the files to be read or written by the server. At the time =
of this=20
writing there are 6 different files used by a server. Version 2.0.0 =
introduced=20
numbers 5 and 6.</P>
<P>1) <FONT face=3D"Courier New, Courier, mono">ventrilo_srv.ini</FONT> =
(Read=20
before starting up and required)<BR>2) <FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.ban</FONT> (Read and =
written but=20
not required)<BR>3) <FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.pid</FONT> (Written =
once as soon=20
as the server starts).<BR>4) <FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.log</FONT> (Appended to =
by the=20
server when ever a log message is generated)<BR>5) <FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.usr</FONT> (Read each =
time a=20
client connects).<BR>6) <FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.chn</FONT> (Read before =
program=20
starts, updated when channels are added/deleted)</P>
<P>When using the "<FONT face=3D"Courier New, Courier, mono">-f</FONT>" =
you don't=20
need to change the working directory but you must provide a path/prefix =
to be=20
used for reading and writing these files. For example, lets assume you =
are=20
running the Linux version and have the server installed in the directory =
"<FONT=20
face=3D"Courier New, Courier, mono">/</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif"><FONT=20
face=3D"Courier New, Courier, mono">home/ventrilo</FONT></FONT>" along =
with all of=20
the necessary files. To start the server with the "<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" option you would simply =
issue the=20
following command.</P>
<P><FONT face=3D"Courier New, Courier, mono">/home/ventrilo/ventrilo_srv =

-f/</FONT><FONT face=3D"Arial, Helvetica, sans-serif"><FONT=20
face=3D"Courier New, Courier, mono">home/ventrilo</FONT></FONT><FONT=20
face=3D"Courier New, Courier, mono">/ventrilo_srv</FONT></P>
<P>Notice there is no space following the "<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" option. The above line =
assumes you=20
are using the default file names. Now, lets assume you are running two =
servers=20
on the same machine. Each server would need to have its own port number =
assigned=20
to it. Thus, we recommend naming the files by the port numbers. To start =
both=20
servers using the "<FONT face=3D"Courier New, Courier, mono">-f</FONT>" =
option you=20
issue the following commands.</P>
<P><FONT face=3D"Courier New, Courier, mono">/</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif"><FONT=20
face=3D"Courier New, Courier, mono">home/ventrilo</FONT></FONT><FONT=20
face=3D"Courier New, Courier, mono">/ventrilo_srv -f/</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif"><FONT=20
face=3D"Courier New, Courier, mono">home/ventrilo</FONT></FONT><FONT=20
face=3D"Courier New, Courier, mono">/3784 -d<BR>/</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif"><FONT=20
face=3D"Courier New, Courier, mono">home/ventrilo</FONT></FONT><FONT=20
face=3D"Courier New, Courier, mono">/ventrilo_srv -f/</FONT><FONT=20
face=3D"Arial, Helvetica, sans-serif"><FONT=20
face=3D"Courier New, Courier, mono">home/ventrilo</FONT></FONT><FONT=20
face=3D"Courier New, Courier, mono">/4000 -d</FONT></P>
<P>The first server would read/write files using the names: 3784.ini, =
3784.ban,=20
3784.pid, 3784.log, 3784.usr and 3784.chn</P>
<P>While the second server would read/write files using the names: =
4000.ini,=20
4000.ban, 4000.pid, 4000.log, 4000.usr and 4000.chn</P>
<P>The "<FONT face=3D"Courier New, Courier, mono">-d</FONT>" on those =
examples=20
will start the servers in daemon mode on UNIX'ish systems.</P>
<P><STRONG>Linux notes:</STRONG></P>
<P>If you have an automated system for restarting a Linux based Ventrilo =
server=20
then you will need to wait about 1 to 2 minutes after the server is =
stopped and=20
before you restart it. There=92s a problem with creating the initial =
network=20
stream shortly after a server is killed and when a new one is started. =
Waiting=20
for about 2 minutes should make it work correctly. This seems to be less =
of a=20
problem starting with version 1.03 because of the architectural change, =
but it=20
probably wouldn't be a bad idea to continue the delay.</P>
<P><STRONG>Example startup scripts:</STRONG></P>
<P>The following script is an example of starting Linux based server(s) =
from the=20
"<FONT face=3D"Courier New, Courier, mono">/etc/rc.d/rc.local</FONT>" =
file when a=20
system is booted. Notice that they are started with the specific user =
account=20
called "ventrilo" and the process priority is bumped to higher then =
normal.</P>
<P><FONT face=3D"Courier New, Courier, mono"># Startup ventrilo=20
servers.</FONT></P></FONT>
<P><FONT=20
face=3D"Courier New, Courier, =
mono">VENPATH=3D/home/ventrilo<BR>VENBIN=3D$VENPATH/ventrilo_srv</FONT></=
P>
<P><FONT face=3D"Courier New, Courier, mono">su ventrilo -c "$VENBIN=20
-f$VENPATH/3784 -d"<BR>su ventrilo -c "$VENBIN -f$VENPATH/4000 =
-d"<BR><BR>renice=20
-5 `cat $VENPATH/3784.pid`<BR>renice -5 `cat =
$VENPATH/4000.pid`</FONT><BR></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Note: Those are GRAVE =
characters=20
around the `cat ... pid` strings. A.K.A backwards apostrophe.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">The "<FONT=20
face=3D"Courier New, Courier, mono">renice</FONT>" command is used to =
bump the=20
priority of the daemon process thus preventing it from being starved for =
CPU=20
time if the same machine is used for running other programs like FTP or =
WEB=20
servers. The Windows version of the server does this automatically. =
However, in=20
a *NIX environment only the "root" user is allowed to bump process=20
priority.</FONT></P>
<HR>

<H4><FONT face=3D"Arial, Helvetica, sans-serif"><EM><A id=3D5 =
name=3D5></A>5) NT=20
Service program </EM></FONT></H4><FONT face=3D"Arial, Helvetica, =
sans-serif">
<P>When running the server on a Windows NT/2000/XP platform you also =
have the=20
option of executing it as an NT Service that will run in the background =
and can=20
be started up automatically when the computer is started.</P>
<P>The Ventrilo server doesn=92t actually run as a service, instead =
there is=20
another program called "<STRONG>ventrilo_svc.exe</STRONG>" that is the =
real=20
service program. This service program is responsible for starting up the =

"<STRONG>ventrilo_srv.exe</STRONG>" server program after the service is=20
loaded.</P>
<P>One advantage to doing it this way is that the service program will =
restart=20
the server if an admin shuts it down or if the program were to crash due =
to a=20
bug.</P>
<P>Another advantage to this technique is that the service program can =
launch=20
multiple copies of the server with each one running a different port =
number and=20
configuration or even different versions.</P>
<P>To register the Service program with the Service Control Manager =
simply open=20
a console window and change directories to where you installed the =
files. Now=20
type the following command:</P>
<P><STRONG><FONT face=3D"Courier New, Courier, mono">ventrilo_svc=20
=96i</FONT></STRONG></P>
<P>This will install the service and mark it for automatic startup the =
next time=20
you reboot your system. After you have completed the following registry=20
configuration options you can issue a =93<STRONG>net start =
ventrilo</STRONG>=94 in=20
the console window to manually start the Ventrilo service program.</P>
<P>If you want to uninstall the service from your system or want to =
install a=20
new version, simply perform the following commands in this order.</P>
<P><STRONG><FONT face=3D"Courier New, Courier, mono">net stop=20
ventrilo<BR>ventrilo_svc =96u</FONT></STRONG></P>
<P>The "<FONT face=3D"Courier New, Courier, mono">=96u</FONT>" option =
will tell the=20
service program to uninstall it self from the systems Service Control=20
Manager.</P>
<P>In order for the service to function properly you also need to setup =
a few=20
registry entries that define each of the servers that you want the =
service=20
program to start. When you issued the =93<FONT=20
face=3D"Courier New, Courier, mono">=96i</FONT>=94 option it also =
created an example=20
registry entry for a single server under the key:</P>
<P><STRONG><FONT=20
face=3D"Courier New, Courier, =
mono">HKEY_LOCAL_MACHINE\Software\Ventrilo</FONT></STRONG></P>
<P>There should be at least one value and one sub-key created in here. =
The value=20
is called <STRONG>EXE</STRONG> and points to the full path and filename =
of the=20
Ventrilo server program. This is the global entry and is used if the =
individual=20
server sub-key=92s don=92t specify one.</P>
<P>The sub-key names can be anything you want them to be. At =
installation time=20
the "<FONT face=3D"Courier New, Courier, mono">=96i</FONT>" option =
created a single=20
sub-key called Server1. In side this key will be 3 string values.</P>
<P>The <STRONG>WorkDir</STRONG> value is required (if the=20
<STRONG>Prefix</STRONG> value isn't used) for each sub-key and must be =
unique=20
for each server if you want the service to start multiple instances of =
the=20
server.</P>
<P>The <STRONG>Prefix</STRONG> value is required (if =
<STRONG>WorkDir</STRONG> is=20
not specified) and is only used in the unique sub-keys for each server. =
When=20
this option is set it activates the "<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" command line parameter =
discussed in=20
section 4 of this document. Do not include the "<FONT=20
face=3D"Courier New, Courier, mono">-f</FONT>" in the Prefix's value as =
the=20
service program will automatically tack that on. All you need to do is =
create=20
this value and give it a fully qualified path and prefix file name. If =
the=20
Prefix value exists and contains anything other then a blank string then =
the=20
<STRONG>WorkDir</STRONG> option will be ignored.</P>
<P>You can also specify an <STRONG>EXE</STRONG> value for defining a =
specific=20
copy of the server to be started up by the service. This is useful if =
you are=20
running different versions of the Ventrilo server. If an =
<STRONG>EXE</STRONG>=20
value exists in the sub-key then it takes precedence over the global=20
<STRONG>EXE</STRONG> value higher up. If they are both missing then the =
service=20
will not start anything.</P>
<P>It's recommended that you name the sub-key=92s with the same name =
that you=20
would assign each server in its "<FONT=20
face=3D"Courier New, Courier, mono">ventrilo_srv.ini</FONT>" file or =
possibly by=20
it's port number, however this is not required and you can name the =
sub-key's=20
what ever you want.</P>
<P>Another feature of the service program is the ability to run in debug =
mode.=20
This lets you test your registry entries and INI file configurations =
before=20
starting it as a real service where its harder to diagnose problems. To =
do this=20
first make sure that the real service is not currently running and then =
start=20
the "<STRONG>ventrilo_svc.exe</STRONG>" with the following command =
line.</P>
<P><STRONG><FONT face=3D"Courier New, Courier, mono">net stop=20
ventrilo<BR>ventrilo_svc =96d</FONT></STRONG></P>
<P>When the service starts in debug mode all of its output will show up =
in the=20
console window where you typed in the command. It will then start each =
instance=20
of the servers you have defined in their own console windows. If the =
service and=20
all servers are happy then they should stay open and running. If not, =
you can go=20
look at each servers log file for any possible problems. Don=92t forget, =
you can=20
also start the servers manually as mentioned earlier in the =
document.</P></FONT>
<HR>

<H4><FONT face=3D"Arial, Helvetica, sans-serif"><EM><A id=3D6 =
name=3D6></A>6)=20
Console/RCON commands </EM></FONT></H4><FONT=20
face=3D"Arial, Helvetica, sans-serif">
<P>The following commands can be typed into a servers console window if =
it was=20
started manually. These same commands can be sent to the server from a =
remote=20
clients chat window by preceding them with the text "<FONT=20
face=3D"Courier New, Courier, mono">/rcon </FONT>". For example "<FONT=20
face=3D"Courier New, Courier, mono">/rcon status</FONT>". But it does =
require that=20
the remote client be logged in with the admin rights. The following is a =
list of=20
all of the console commands and brief descriptions on their meaning and =
use.=20
Some examples show the &lt; and &gt; around the parmaters. Do not =
include these=20
characters when typing the command. </P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>auth &lt; 0 | 1 | =
2=20
&gt;</STRONG></FONT></P></FONT>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03,=20
allows the authorization mode to be changed dynamically.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>banadd &lt;ip&gt; =

&lt;reason&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Adds an IP address and a =
reason for=20
the banning to the ban list and ban file.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>bandel=20
&lt;ip&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Deletes an IP address =
from the ban=20
list. Starting with version 1.03 this command will automatically update =
the ban=20
file.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, =
sans-serif"><STRONG>banlist</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">This option will display =
all of the=20
banned IP address, the user name of the IP address, the admin who banned =
them=20
and a reason why.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>clientkick=20
&lt;uid&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Instructs the server to =
disconnect=20
a user where &lt;uid&gt; is the users connection ID number.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>clientstatus=20
&lt;uid&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03, this=20
option will output more detailed information about a specified=20
client.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>comment=20
&lt;text&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">This option allows the =
server's=20
comment string to be changed dynamically. The &lt;text&gt; can be =
anything you=20
want.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>diag &lt; 0 | 1=20
&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03,=20
allows the diagnostic mode to be changed dynamically.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>filtertts &lt; 0 =
| 1=20
&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.07,=20
enables or disables filtering out of TTS binds.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>filterwave &lt; 0 =
| 1=20
&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.07,=20
enables or disables filtering out of wave file binds.</FONT></P>
<P><FONT=20
face=3D"Arial, Helvetica, =
sans-serif"><STRONG>help</STRONG></FONT></P><FONT=20
face=3D"Arial, Helvetica, sans-serif">
<P><FONT face=3D"Arial, Helvetica, sans-serif">Displays the list of =
possible=20
console commands.</FONT></P>
<P><FONT=20
face=3D"Arial, Helvetica, =
sans-serif"><STRONG>kickall</STRONG></FONT></P></FONT>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03, kicks=20
all clients connected to the server. If issued via an "/rcon" command =
from an=20
admining client, that client is exempted from the kick.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>loggrep =
&lt;lines&gt;=20
&lt;search text&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.07,=20
allows the servers log file to be searched for a specific piece of text. =
If=20
lines is 0 then all matching entries will be displayed, otherwise only =
the last=20
number of &lt;lines&gt; specified matching the search will be displayed. =
The=20
search string does NOT support regular expressions and all comparisons =
are case=20
sensitive.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">WARNING: Using this =
command may=20
cause the server to momentarily interrupt voice communication for all =
clients=20
depending on the size of the log file. It's also possible that the =
results will=20
be too long and potentially flood the requesters connection with too =
much=20
information, thus causing the server to disconnect you. It is probably =
best that=20
you always specify a number of &lt;lines&gt; to limit the =
results.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>maxclients=20
&lt;#&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03,=20
allows the maxclients value to be changed dynamically.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>monitor &lt; 0 | =
1=20
&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">This option is only valid =
when=20
requested from a remote client using the "/rcon" option in the chat =
window. It=20
instructs the server to send all status and log messages to the client =
that=20
typed this command. The monitor command is turned on by setting the =
value to 1,=20
and turned off by a value of 0. Prior to version 1.03 the monitor =
command was a=20
toggle.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, =
sans-serif"><STRONG>name</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
2.0.0, this=20
option will display the server's name and current comment. Usefull for =
when you=20
start multiple servers on the Linux platform using the "screen"=20
program.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>password=20
&lt;newpassword&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03,=20
allows the global login password to be changed dynamically. </FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>pingrate=20
&lt;1..10&gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.07,=20
allows for changing the interval (specified in seconds) that the server =
will=20
ping the clients.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>pingtrace &lt; -2 =
| -1 | 0=20
| 1..n &gt;</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.07,=20
allows for tracing the ping results as they are reported back from the =
clients.=20
This option is only valid when issued by remote clients and does not =
work from=20
the server's console window.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">-2 =3D Display the ping =
results for=20
those clients that are in the same channel.<BR>-1 =3D Display the ping =
results for=20
all clients.<BR>0 =3D Ping tracing disabled.<BR>1..n =3D Display the =
ping results=20
for a specific client (specifies the UID)</FONT></P>
<P><FONT face=3D"Arial, Helvetica, =
sans-serif"><STRONG>quit</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Forces the server to =
shutdown. If=20
the server was started by an NT Service control program then it will be=20
automatically restarted in 10 seconds.</FONT></P>
<P><FONT=20
face=3D"Arial, Helvetica, =
sans-serif"><STRONG>serverstatus</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.03,=20
output detailed status information about the server and specified=20
interfaces.</FONT></P>
<P><FONT=20
face=3D"Arial, Helvetica, =
sans-serif"><STRONG>status</STRONG></FONT></P><FONT=20
face=3D"Arial, Helvetica, sans-serif">
<P><FONT face=3D"Arial, Helvetica, sans-serif">Displays the user id, =
channel id,=20
login name and IP address for all of the connected users.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>timestamp &lt; 0 =
| 1=20
&gt;</STRONG></FONT></P></FONT>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Introduced with version =
1.07,=20
enables or disables displaying timestamp's on console and remote console =
server=20
messages.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif"><STRONG>tts=20
&lt;text&gt;</STRONG></FONT></P><FONT face=3D"Arial, Helvetica, =
sans-serif">
<P><FONT face=3D"Arial, Helvetica, sans-serif">This option will send out =
a=20
Text-to-speech message to all users connected to the server, no matter =
which=20
channel they are currently in. The &lt;text&gt; can be anything you =
want. This=20
command and the comment command could be very useful if you are hosting =
a server=20
that is reserved for a specific amount of time and you want to send TTS =
messages=20
informing the connected users about how much time remains before the =
server is=20
shutdown.</FONT></P>
<P><FONT face=3D"Arial, Helvetica, =
sans-serif"><STRONG>version</STRONG></FONT></P>
<P><FONT face=3D"Arial, Helvetica, sans-serif">Displays the application =
version of=20
the server.</FONT></P>
<P>&nbsp;</P></FONT></BODY></HTML>
